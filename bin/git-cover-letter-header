#!/bin/sh

set -eu

REPOSITORY=$(git remote -v | head -n 1 | \
         egrep --only-matching "(git://|git@|ssh://)[^ ]*")
BRANCH=$(git status --branch --porcelain | head -n 1 | cut -c 4- | \
         sed -e 's/\(.*\)\.\.\..*/\1/')
SHA1=$(git rev-parse $BRANCH)

echo
echo "Repository: $REPOSITORY"
echo "Ref: $BRANCH" 
echo "Sha1: $SHA1"

if ! git rev-parse origin/$BRANCH >/dev/null 2&>1; then
    echo >&2 "Don't forget to push -- branch origin/$BRANCH does not exist!"
fi
